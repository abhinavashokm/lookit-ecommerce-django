{% extends 'admin_base/base.html' %}
{% load static %}
{% block styles %}
<link rel="stylesheet" href="{% static 'order/css/admin/order_details.css' %}">
<link rel="stylesheet" href="{% static 'admin/css/components/pagination.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}


{% block content %}
<!-- Main Content -->
<main class="main-content">
    <!-- Page Header -->
    <div class="page-header">
        <div class="breadcrumbs">
            <a href="#">Orders</a>
            <span>/</span>
            <span>#ORD1023</span>
        </div>
        <h1 class="page-title">Order Details</h1>
    </div>

    <div class="order-details-container">
        <!-- Order Summary Card -->
        <div class="order-card">
            <div class="card-header">
                <h2>Order Summary</h2>
                <button class="btn btn-outline">
                    <i class="fas fa-download"></i> Export as CSV
                </button>
            </div>
            <div class="card-body">
                <div class="order-info-grid">
                    <div class="info-group">
                        <div class="info-group-header">
                            <i class="fas fa-truck"></i>
                            <span>Order Status</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Order ID</span>
                            <span class="info-value">#ORD1023</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Date</span>
                            <span class="info-value">2024-07-26</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Status</span>
                            <span class="status-badge status-shipped">Shipped</span>
                        </div>
                    </div>

                    <div class="info-group">
                        <div class="info-group-header">
                            <i class="fas fa-credit-card"></i>
                            <span>Payment Details</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Status</span>
                            <span class="status-badge status-paid">Paid</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Method</span>
                            <span class="info-value">Credit Card</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Total Amount</span>
                            <span class="info-value total-amount">$75.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Information -->
        <div class="order-card">
            <div class="card-header">
                <h2>Customer Information</h2>
            </div>
            <div class="card-body">
                <div class="customer-info">
                    <div class="customer-avatar">
                        <img src="https://ui-avatars.com/api/?name=Amelia+Bennett&background=6366f1&color=fff&size=160"
                            alt="Amelia Bennett">
                    </div>
                    <div class="customer-details">
                        <div class="info-item">
                            <span class="info-label">Name</span>
                            <span class="info-value">Amelia Bennett</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Email</span>
                            <span class="info-value">amelia.bennett@example.com</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Phone</span>
                            <span class="info-value">(555) 123-4567</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Details -->
        <div class="order-card">
            <div class="card-header">
                <h2>Product Details</h2>
            </div>
            <div class="card-body">
                <div class="table-container">
                    <table class="product-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Product Details</th>
                                <th>Variant</th>
                                <th>Quantity</th>
                                <th>Unit Price</th>
                                <th>Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="product-image">
                                        <img src="https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcTrMfQmW0JYXQSOrwi2xC-A9owX_mNG7Gw02kHAynHCJh-OHZEaIQB0le5xDTUZfeVBkyAptjhCFd1dehkzwODS0TOxFaecGYGDU40e41ESs49NR7AhpdVzDgjvocISxtBbg72Ppzc9&usqp=CAc" alt="Classic White Tee">
                                    </div>
                                </td>
                                <td>
                                    <div class="product-details">
                                        <div class="product-name">Classic White Tee</div>
                                        <div class="product-id">ID: PRD-001234</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="variant-details">
                                        <span class="color-swatch"
                                            style="background-color: #ffffff; border: 1px solid #e5e7eb;"></span>
                                        <span>White, M</span>
                                    </div>
                                </td>
                                <td class="text-center">1</td>
                                <td class="text-right">$25.00</td>
                                <td class="text-right">$25.00</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5" class="text-right">Subtotal</td>
                                <td>$25.00</td>
                            </tr>
                            <tr>
                                <td colspan="5" class="text-right">Shipping</td>
                                <td>$0.00</td>
                            </tr>
                            <tr class="total-row">
                                <td colspan="5" class="text-right"><strong>Total</strong></td>
                                <td><strong>$25.00</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Order Status and Payment Details Row -->
        <div class="order-cards-row">
            <!-- Order Status -->
            <div class="order-card">
                <div class="card-header">
                    <h2>Order Status</h2>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <div class="timeline-content">
                                <h4>Order Placed</h4>
                                <p>July 15, 2024, 10:30 AM</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <div class="timeline-content">
                                <h4>Order Confirmed</h4>
                                <p>July 15, 2024, 11:00 AM</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <div class="timeline-content">
                                <h4>Shipped</h4>
                                <p>July 18, 2024, 2:15 PM</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <h4>Out for Delivery</h4>
                                <p>Expected: July 20, 2024</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <h4>Delivered</h4>
                                <p>July 20, 2024, 12:00 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Details -->
            <div class="order-card">
                <div class="card-header">
                    <h2>Payment Details</h2>
                </div>
                <div class="card-body">
                    <div class="payment-details">
                        <div class="info-item">
                            <span class="info-label">Method</span>
                            <span class="info-value">Credit Card</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Transaction ID</span>
                            <span class="info-value">TXN123456789</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Status</span>
                            <span class="status-badge status-paid">Paid</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Paid Date</span>
                            <span class="info-value">July 15, 2024</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Mode</span>
                            <span class="info-value">Online</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="openStatusModal()">
                <i class="fas fa-edit"></i> Change Order Status
            </button>
            <button class="btn btn-danger" onclick="openDeleteModal()">
                <i class="fas fa-times"></i> Cancel Order
            </button>
        </div>

    </div>
</main>

<!--Change order status model-->
<div id="statusModal" class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <h3>Change Order Status</h3>
            <button class="close-btn" onclick="closeStatusModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="order-info">
                <p><strong>Order ID:</strong> #ORD1023</p>
                <p><strong>Product:</strong> Classic White Tee</p>
            </div>

            <div class="form-group">
                <label for="statusSelect">New Status</label>
                <select id="statusSelect" class="form-control">
                    <option value="pending">Pending</option>
                    <option value="processing">Processing</option>
                    <option value="shipped" selected>Shipped</option>
                    <option value="delivered">Delivered</option>
                    <option value="cancelled">Cancelled</option>
                    <option value="returned">Returned</option>
                </select>
            </div>

            <div class="form-group">
                <label for="adminNotes">Admin Notes (Optional)</label>
                <textarea id="adminNotes" class="form-control" rows="3"
                    placeholder="Add any notes about this status change..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeStatusModal()">Cancel</button>
            <button class="btn btn-primary" onclick="updateOrderStatus()">Update Status</button>
        </div>
    </div>
</div>

<!-- Cancel Confirmation Modal -->
<div class="modal-overlay" id="deleteModal{{style.id}}">
    <div class="modal">
        <div class="modal-header">
            <h2 class="modal-title">Cancel Order</h2>
        </div>
        <div class="modal-body">
            <p class="modal-message">Are you sure you want to Cancel this Order?<strong id="deleteStyleId"></strong></p>
        </div>
        <div class="modal-actions">
            <button class="modal-btn modal-btn-cancel" onclick="closeDeleteModal('{{style.id}}')">Close</button>
            <a href="#">
                <button class="modal-btn modal-btn-confirm" onclick="confirmDelete('{{style.id}}')">Confirm</button>
            </a>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{% static 'order/js/admin/order_details.js' %}"></script>
{% endblock %}