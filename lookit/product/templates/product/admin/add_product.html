{% extends 'admin_base/base.html' %}
{% load static %}
{% block styles %}
<!-- Select2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<link rel="stylesheet" href="{% static 'product/admin/css/add_product.css' %}">
{% endblock %}

<!-- Main Content -->
{% block content %}
<!-- Main Content -->
<main class="main-content">
    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <a href="{% url 'admin-list-products' %}">Products</a>
        <span>/</span>
        <span>Add Product</span>
    </div>

    <!-- Page Title -->
    <h1 class="page-title">Add New Product</h1>

    <!-- Form Container -->
    <div class="form-container">
        <form id="addProductForm" method="post" action="{% url 'admin-add-product' %}">
            {% csrf_token %}
            <!-- Basic Information -->
            <div class="form-section">
                <h2 class="section-title">Basic Information</h2>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="productName">Product Name</label>
                        <input type="text" name="name" id="productName" name="productName" placeholder="Enter Product Name"
                            >
                    </div>
                    <div class="form-group full-width">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" placeholder="Enter product description"
                            ></textarea>
                    </div>
                    <div class="form-group">
                        <label for="brand">Brand</label>
                        <input type="text" id="brand" name="brand" placeholder="Enter Brand Name" >
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status" >
                            <option value="" disabled selected>Select Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="colorBase">Color Base</label>
                        <select id="colorBase" name="colorBase" >
                            <option value="" disabled selected>Name for filtering</option>
                            <option value="white">White</option>
                            <option value="black">Black</option>
                            <option value="beige">Beige</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                            <option value="red">Red</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Category -->
            <div class="form-section">
                <h2 class="section-title">Category</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" name="category" >
                            <option value="" disabled selected>Select Category</option>
                            <option value="t-shirts">T-shirts</option>
                            <option value="hoodies">Hoodies</option>
                            <option value="sweatshirts">Sweatshirts</option>
                            <option value="tank-tops">Tank Tops</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="type">Type</label>
                        <select id="type" class="select2" name="type" >
                            <option value="" disabled selected>Select Type</option>
                            <option value="men">Men</option>
                            <option value="women">Women</option>
                            <option value="unisex">Unisex</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Additional Information -->
            <div class="form-section">
                <h2 class="section-title optional">Additional Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="material">Material</label>
                        <input type="text" id="material" name="material" placeholder="Enter material">
                    </div>
                    <div class="form-group">
                        <label for="fit">Fit</label>
                        <input type="text" id="fit" name="fit" placeholder="Enter fit">
                    </div>
                    <div class="form-group full-width">
                        <label for="careInstructions">Care Instructions</label>
                        <input type="text" id="careInstructions" name="careInstructions"
                            placeholder="Enter care instructions">
                    </div>
                </div>
            </div>

            <!-- Price -->
            <div class="form-section">
                <h2 class="section-title">Price</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="basePrice">Price</label>
                        <input type="number" id="basePrice" name="price" placeholder="Enter Price" step="0.01"
                            >
                    </div>
                </div>
            </div>

            <!-- Images & Media -->
            <div class="form-section">
                <h2 class="section-title">Images & Media</h2>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Upload Thumbnail Image <span style="color: #ef4444;">*</span></label>
                        <div class="upload-area" id="thumbnailUpload"
                            onclick="document.getElementById('thumbnailInput').click()">
                            <div class="upload-text">Drag and drop or click to upload</div>
                            <button type="button" class="upload-btn">Upload Image</button>
                            <input type="file" id="thumbnailInput" accept="image/*" style="display: none;"
                                onchange="handleThumbnailUpload(event)">
                        </div>
                        <div class="validation-message" id="thumbnailValidationMessage">Please upload exactly one
                            thumbnail image</div>
                        <div class="thumbnail-preview-container" id="thumbnailPreviewContainer" style="display: none;">
                            <div class="thumbnail-preview">
                                <img id="thumbnailPreviewImg" src="" alt="Thumbnail Preview">
                                <button type="button" class="remove-thumbnail-btn" onclick="removeThumbnail()">
                                    <span>Ã—</span>
                                    <span>Remove</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label>Upload Additional Images <span style="color: #ef4444;">*</span> (Minimum 2
                            images)</label>
                        <div class="upload-area" id="additionalUpload"
                            onclick="document.getElementById('additionalInput').click()">
                            <div class="upload-text">Drag and drop or click to upload multiple images</div>
                            <button type="button" class="upload-btn">Upload Images</button>
                            <input type="file" id="additionalInput" accept="image/*" multiple style="display: none;"
                                onchange="handleAdditionalUpload(event)">
                        </div>
                        <div class="validation-message" id="additionalValidationMessage">Please upload minimum 2
                            additional images</div>
                        <div class="images-count" id="additionalImagesCount">0 images uploaded</div>
                        <div class="additional-images-grid" id="additionalImagesGrid"></div>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn-cancel"
                    onclick="window.location.href='product_management.html'">Cancel</button>
                <button type="submit" class="btn-save">Save Product</button>
            </div>
        </form>
    </div>
</main>
{% endblock %}

{% block scripts %}
<!-- jQuery (required for Select2, style searching) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Select2 JS -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script src="{% static 'product/admin/js/add_product.js' %}"></script>
{% endblock %}