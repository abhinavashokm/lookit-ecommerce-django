<!--
ReadMe
------
This is an edit address modal. So in order to prefill the form I needed to render django context into this html. So when passing the address instance name it address
1] First include the required html, css and js into the desired file
2] Add this function call when edit btn click => openEditAddressModal('{{ address.id }}')

-->

<!-- Edit Address Modal -->
<div class="modal" id="editAddressModal{{ address.id }}">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-map-marker-alt"></i> Edit Address</h3>
            <button class="close-modal" onclick="closeEditAddressModal()" id="close-edit-modal{{ address.id }}"
                aria-label="Close modal">&times;</button>
        </div>
        <div class="modal-body">

            <form action="{% url 'edit-address' %}" method="post" id="addressForm{{address.id}}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <input type="hidden" name="address_id" value="{{ address.id }}">
                <div class="form-section">
                    <h4 class="section-title">Contact Information</h4>
                    <div class="form-grid">

                        <div class="form-group">
                            <label for="fullName">Full Name <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-user"></i>
                                <input type="text" name="full_name" value="{{ address.full_name }}" id="fullName"
                                    required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-phone"></i>
                                <input type="tel" name="phone" value="{{ address.phone }}" id="phone" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="altPhone">Alternative Phone</label>
                            <div class="input-with-icon">
                                <i class="fas fa-phone-alt"></i>
                                <input type="tel" name="second_phone" value="{{ address.second_phone }}" id="altPhone">
                            </div>
                        </div>

                    </div>
                </div>

                <div class="form-section">
                    <h4 class="section-title">Address Details</h4>
                    <div class="form-grid">

                        <div class="form-group full-width">
                            <label for="address">Address Line <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-map-marked-alt"></i>
                                <input type="text" name="address_line" value="{{ address.address_line }}" id="address"
                                    required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="city">City <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-city"></i>
                                <input type="text" name="city" value="{{ address.city }}" id="city" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="state">State <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-flag"></i>
                                <input type="text" name="state" value="{{ address.state }}" id="state" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="zipCode">PIN Code <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <i class="fas fa-mail-bulk"></i>
                                <input type="text" name="pincode" value="{{ address.pincode }}" id="zipCode" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="addressType">Address Type <span class="required">*</span></label>
                            <div class="select-wrapper">
                                <i class="fas fa-tag"></i>

                                <select name="type" id="addressType" required>
                                    <option value="" disabled selected>Select address type</option>
                                    <option value="home" {% if address.type == 'home' %}selected{% endif %}>Home</option>
                                    <option value="work" {% if address.type == 'work' %}selected{% endif %}>Work</option>
                                    <option value="other" {% if address.type == 'other' %}selected{% endif %}>Other
                                    </option>
                                </select>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input name="is_default" value="True" type="checkbox" id="defaultAddress" {% if address.is_default %}checked{% endif %}>
                            <span class="checkmark"></span>
                            Set as default shipping address
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button onclick="closeEditAddressModal()" type="button" class="btn btn-outline"
                        id="btn-edit-outline{{ address.id }}">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Address
                    </button>
                </div>
            </form>

        </div>
    </div>
</div>