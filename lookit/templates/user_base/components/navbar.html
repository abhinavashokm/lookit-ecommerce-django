<header>
    <nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
        <a href="{% url 'index' %}" class="logo">Lookit</a>
        <ul class="nav-links">
            <li  ><a class="{% if request.resolver_match.url_name == 'explore' and request.GET.category == Null %}active_category{% endif %}" href="{% url 'explore' %}">All</a></li>
            <li><a class="{% if request.resolver_match.url_name == 'explore' and request.GET.category == 'men' %}active_category{% endif %}" href="{% url 'explore' %}?category=men">Men</a></li>
            <li><a class="{% if request.resolver_match.url_name == 'explore' and request.GET.category == 'women' %}active_category{% endif %}" href="{% url 'explore' %}?category=women">Women</a></li>
            <li><a class="{% if request.resolver_match.url_name == 'explore' and request.GET.category == 'kids' %}active_category{% endif %}" href="{% url 'explore' %}?category=kids">Kids</a></li>
        </ul>
        <div class="header-right">

            <div class="wishlist-icon-wrapper">
                <a href="{% url 'wishlist' %}">
                    <button class="icon-btn" title="Wishlist">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                        </svg>
                    </button>
                </a>
                <!-- ✅ Badge -->
                <span id="wishlistCount" class="cart-badge">{{ wishlist_count }}</span>
            </div>

            <div class="cart-icon-wrapper">
                <a href="{% url 'cart' %}">
                    <button class="icon-btn" title="Shopping Cart">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                        </svg>
                    </button>
                </a>

                <!-- ✅ Badge -->
                <span class="cart-badge">{{ cart_count }}</span>
            </div>

            {% if request.user.is_authenticated %}
                <!--PROFILE BUTTON FOR DESKTOP DEVICES (ABOVE WIDTH 1000PX)-->
                <a class="desktop-profile-icon" href="{% url 'account-details' %}">
                    {% if request.user.profile_img_url %}
                    <img class="profile-btn-desktop" ti tle="User Profile" src="{{ request.user.profile_img_url }}" alt=""
                    onerror="this.src='https://t3.ftcdn.net/jpg/06/33/54/78/360_F_633547842_AugYzexTpMJ9z1YcpTKUBoqBF0CUCk10.jpg'">
                    {% else %}
                    <svg class="profile-btn" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path fill="#B55E8A" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    {% endif %}
                </a>

                <!--PROFILE BUTTON FOR MOBILE DEVICES (BELOW WIDTH 1000PX)-->
                <div class="profile-dropdown-wrapper mobile-profile-icon">
                     <div class="dropdown-safe-zone">
                    <button class="profile-btn" id="profileDropdownBtn" aria-haspopup="true" aria-expanded="false">
                        {% if request.user.profile_img_url %}
                            <img src="{{ request.user.profile_img_url }}" alt="Profile">
                        {% else %}
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#B55E8A" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        {% endif %}
                        <!-- Small chevron for better affordance -->
                        <span class="profile-chevron">
                            <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
                        </span>
                    </button>

                    <!-- Professional Dropdown Menu -->
                    <div class="profile-dropdown-menu" id="profileDropdownMenu">
                        <div class="dropdown-user-info">
                            {% if request.user.profile_img_url %}
                                <img src="{{ request.user.profile_img_url }}" alt="User" class="dropdown-avatar">
                            {% else %}
                                <div class="dropdown-avatar placeholder">
                                    <svg viewBox="0 0 24 24"><path fill="#ccc" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                                </div>
                            {% endif %}
                            <div class="dropdown-user-details">
                                <div class="dropdown-username">Hello, {{ request.user.first_name|default:request.user.username|title }}</div>
                                <div class="dropdown-email">{{ request.user.email }}</div>
                            </div>
                        </div>

                        <div class="dropdown-divider"></div>

                        <div class="dropdown-links">
                            <a href="{% url 'account-details' %}" class="dropdown-link">
                                <i class="fas fa-user-circle"></i>
                                <span>My Profile</span>
                            </a>
                            <a href="{% url 'wishlist' %}" class="dropdown-link">
                                <i class="far fa-heart"></i>
                                <span>Wishlist</span>
                            </a>
                            <a href="{% url 'my-orders' %}" class="dropdown-link">
                                <i class="fas fa-shopping-bag"></i>
                                <span>My Orders</span>
                            </a>
                            <a href="{% url 'address-book' %}" class="dropdown-link">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Address Book</span>
                            </a>
                            <a href="{% url 'wallet' %}" class="dropdown-link">
                                <i class="fas fa-wallet"></i>
                                <span>Wallet</span>
                            </a>
                        </div>

                        <div class="dropdown-divider"></div>

                        <div class="dropdown-footer">
                            <a href="{% url 'user-logout' %}" class="dropdown-link logout">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Sign Out</span>
                            </a>
                        </div>
                    </div>

                    </div>
                </div>
            {% else %}
                <a href="{% url 'user-login' %}">
                    <button class="login-btn">Login</button>
                </a>
            {% endif %}


        </div>
        <div class="mobile-menu" id="mobileMenu">
            <ul class="nav-links">
                <li><a href="{% url 'explore' %}">All</a></li>
                <li><a href="{% url 'explore' %}?category=men">Men</a></li>
                <li><a href="{% url 'explore' %}?category=women">Women</a></li>
                <li><a href="{% url 'explore' %}?category=kids">Kids</a></li>
            </ul>
        </div>
    </nav>
</header>